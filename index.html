<!doctype html>
<html>

<head>
    <title>///</title>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="author" content="https://github.com/noeramadhan">
    <meta name="description" content="///">
    <link href="https://fonts.googleapis.com/css?family=Playfair+Display&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css?family=Noto+Sans&display=swap" rel="stylesheet">
    <link href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" rel="stylesheet">
    <style>
        #list-item-title,
        h1,
        h2,
        h3,
        h4,
        h5,
        h6 {
            font-family: 'Playfair Display', serif!important
        }
        
        a {
            color: black
        }
        body {
        	font-family: 'Noto Sans', sans-serif!important
        }
        
        a:hover {
            color: gray;
            text-decoration: none
        }
    </style>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" type="application/javascript"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.15.0/umd/popper.min.js" type="application/javascript"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" type="application/javascript"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/showdown/1.9.0/showdown.min.js" type="application/javascript"></script>
    <script type="application/javascript">
    	var base = "https://cdn.jsdelivr.net/gh/noeramadhan/noeramadhan.github.io@master/posts/";
        $(document).ready(function() {
            $.ajaxSetup({
                cache: false
            });
            route();
            $(window).on('hashchange', route);
        });

        function list() {
            $.ajax({
                url: 'posts/list.json',
                dataType: 'json',
                success: function(data) {
                	
                	function sort(array, key){
                		return array.sort(function(a, b){
                			var x = a[key];
                			var y = b[key];
                			return ((x > y) ? -1 : ((x < y) ? 1 : 0));
                		});
                	}
                	data.posts = sort(data.posts, 'date');
                    var content = '<div class="card border-0 text-center"><ul class="list-group list-group-flush">';
                    $.each(data.posts, function(key, helper) {
                        content += '<li class="list-group-item"><a href="#' + helper['slug'] + '" class="link" id="list-item-slug"><h5 class="display-4"><strong id="list-item-title">' + helper['title'] + '</strong></h5></a><small class="text-muted">Posted on <span id="list-item-date">' + helper['date'] + '</span></small></li>';
                    });
                    content += '</ul></div>';
                    $('#content').append(content);
                    document.title = "///";
                },
            });
        }

        function route() {
            $('#content').html('');
            var file = (location.hash ? location.hash : "#index").slice(1);
            (file == "index") ? list(): read(file);
        }

        function read(name) {
            $.ajax({
                url: base + name + '.md',
                success: function(data) {
                    var converter = new showdown.Converter({
                            metadata: true
                        }),
                        html = converter.makeHtml(data),
                        meta = converter.getMetadata();
                    if (meta['title'] !== undefined) {
                        $('#content').append('<h1 id="title" class="mb-0"><strong>' + meta['title'] + '</strong></h1><small class="text-muted">Posted on <span id="list-item-date">' + meta['date'] + '</span></small>');
                    }
                    $('#content').append(html);
                    document.title = "/// | " + meta['title'];
                },
                error: function() {
                    read("404");
                }
            });
        }
    </script>
</head>

<body>
    <div class="container mt-3">
        <div class="row">
            <div class="col-md-6 col-sm-12 mx-auto">
                <div class="card card-body border-0">
                    <h1 class="display-3 text-center"><strong><a href="#">///</a></strong></h1>
                    <hr>
                    <div id="content"></div>
                    <hr>
                    <div class="footer">
                        <p class="text-center"><small class="text-muted"><s>&copy</s> 2019</small></p>
                    </div>
                </div>
            </div>
        </div>
    </div>
</body>

</html>
    
    